<div class="reporte-wrapper">
  <button (click)="generarPDF()" class="btn-pdf">ðŸ“„ Descargar PDF</button>

  <div #reportePDF class="pdf-content">
    <h2>ðŸ“Š Reporte del sistema</h2>

    <!-- KPIs -->
    <section class="kpi-section">
      <div class="kpi-card">Total productos: <strong>{{ totalProductos }}</strong></div>
      <div class="kpi-card">Ventas totales: <strong>{{ ventasTotales | currency:'USD' }}</strong></div>
      <div class="kpi-card">Camiones activos: <strong>{{ camionesActivos }}</strong></div>
      <div class="kpi-card">Pedidos pendientes: <strong>{{ pedidosPendientes }}</strong></div>
    </section>

    <!-- Ventas por dÃ­a (grÃ¡fico simulado en tabla) -->
    <section>
      <h3>Ventas por dÃ­a (Dom - SÃ¡b)</h3>
      <table>
        <tr><th>DÃ­a</th><th>Total vendido</th></tr>
        <tr *ngFor="let v of ventasPorDia; let i = index">
          <td>{{ ['Dom', 'Lun', 'Mar', 'MiÃ©', 'Jue', 'Vie', 'SÃ¡b'][i] }}</td>
          <td>{{ v | currency:'USD' }}</td>
        </tr>
      </table>
    </section>

    <!-- Productos -->
    <section>
      <h3>Ãšltimos productos aÃ±adidos</h3>
      <table>
        <tr><th>Nombre</th><th>Stock</th><th>Precio</th></tr>
        <tr *ngFor="let p of productos">
          <td>{{ p.nombre }}</td>
          <td>{{ p.stock }}</td>
          <td>{{ p.precio | currency:'USD' }}</td>
        </tr>
      </table>
    </section>

    <!-- Pedidos -->
    <section>
      <h3>Ãšltimos pedidos</h3>
      <table>
        <tr><th>ID</th><th>Cliente</th><th>Total</th><th>Estado</th></tr>
        <tr *ngFor="let p of pedidos">
          <td>{{ p.id }}</td>
          <td>{{ p.cliente }}</td>
          <td>{{ p.total | currency:'USD' }}</td>
          <td>{{ p.estado }}</td>
        </tr>
      </table>
    </section>

    <!-- Fabricantes -->
    <section>
      <h3>Fabricantes y productos</h3>
      <table>
        <tr><th>Fabricante</th><th>Productos</th></tr>
        <tr *ngFor="let f of fabricantes">
          <td>{{ f.nombre }}</td>
          <td>{{ f.productos?.join(', ') || 'â€”' }}</td>
        </tr>
      </table>
    </section>
  </div>
</div>
